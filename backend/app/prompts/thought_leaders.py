"""
Coaching frameworks from thought leaders and bestselling authors.
Each framework can be activated as an enhancement to the base GROW model.

LEGAL DISCLAIMER:
These frameworks are educational summaries of publicly available coaching concepts,
used under Fair Use for educational and coaching purposes. All frameworks are attributed
to their original authors. This is not a substitute for reading the original books.

See docs/LEGAL_ATTRIBUTION.md for full legal attribution and recommended reading list.
"""

# Kim Scott - Radical Candor
RADICAL_CANDOR = """
**Radical Candor Framework (Kim Scott):**

Core principle: Care Personally + Challenge Directly

**The 2×2 Matrix:**
1. **Radical Candor** (high care + high challenge)
   - Give specific, actionable feedback
   - Show you care about the person's growth
   - Example: "I noticed [specific behavior]. Here's why it matters and how to improve."

2. **Ruinous Empathy** (high care, low challenge) - AVOID
   - Being "nice" but not helpful
   - Withholding critical feedback to avoid discomfort

3. **Obnoxious Aggression** (low care, high challenge) - AVOID
   - Being brutally honest without empathy
   - Feedback feels like an attack

4. **Manipulative Insincerity** (low care, low challenge) - AVOID
   - Passive-aggressive or fake feedback
   - Neither helpful nor genuine

**When to use:**
- Performance feedback conversations
- Addressing team dynamics
- Building trust through directness
- Navigating difficult conversations

**Key phrases:**
- "I'm saying this because I care about your success..."
- "Can I give you some direct feedback on [specific behavior]?"
- "What I observed was... and here's why it matters..."

**Application in coaching:**
- Encourage coachees to practice radical candor with their teams
- Model it in coaching relationship (care + challenge)
- Help identify when they're falling into Ruinous Empathy
""".strip()


# Julie Zhuo - The Making of a Manager
MAKING_OF_A_MANAGER = """
**The Making of a Manager (Julie Zhuo):**

Core focus: First-time managers & leadership transitions

**Key Frameworks:**

1. **Great Manager Definition:**
   - Gets better outcomes from a group than would happen otherwise
   - Multiplies team effectiveness
   - Measured by team results, not personal heroics

2. **The 3 Core Responsibilities:**
   - **Purpose**: Ensure team knows WHY their work matters
   - **People**: Build a team that works well together
   - **Process**: Create efficient ways of working

3. **Feedback Formula:**
   - Set clear expectations upfront
   - Share observations (not judgments)
   - Clarify impact on goals/team
   - Discuss next steps together

4. **1-on-1 Meeting Framework:**
   - Discuss top-of-mind for them (not your agenda)
   - Identify & clear blockers
   - Talk about team dynamics
   - Career development & growth

5. **Delegation Maturity Model:**
   - "Tell me what to do" → micromanaging
   - "Here are the options, what should I do?" → teaching
   - "Here's what I plan to do" → delegating
   - "Here's what I did" → autonomy

**When to use:**
- New manager transitions
- Building high-performing teams
- Delegation challenges
- Setting up team processes
- Performance management

**Key questions:**
- "What would make this team 2x more effective?"
- "Are you clear on why this work matters?"
- "What's blocking you that I can help remove?"
- "What decision-making authority do you need?"

**Application in coaching:**
- Guide new managers through transitions
- Diagnose delegation maturity levels
- Structure effective 1-on-1s
- Build team purpose clarity
""".strip()


# Deborah Liu - Take Back Your Power
TAKE_BACK_YOUR_POWER = """
**Take Back Your Power (Deborah Liu):**

Core focus: Women in leadership, overcoming self-doubt, owning your career

**Key Frameworks:**

1. **5 Lies Women Leaders Tell Themselves:**
   - "I'm not ready yet" → Nobody is ever "ready"
   - "I don't deserve it" → You've earned your seat
   - "It's never enough" → Perfectionism is a trap
   - "I can't have it all" → Define YOUR "all"
   - "It's too late" → Career isn't linear

2. **Power = Ownership + Influence:**
   - **Own your narrative**: Control how you're perceived
   - **Own your career**: Don't wait for permission
   - **Own your voice**: Speak up, even when uncomfortable
   - **Own your mistakes**: Failure is data, not identity

3. **Visibility Strategy:**
   - Document your wins (keep a brag file)
   - Share successes with stakeholders
   - Build strategic relationships (not just networking)
   - Speak at meetings (even when nervous)

4. **Negotiation Framework:**
   - Know your market value (data > feelings)
   - Ask for more than you think you deserve
   - Negotiate beyond salary (equity, title, scope)
   - Practice saying "This is what I need"

5. **Imposter Syndrome Antidotes:**
   - Reframe: "I feel like an imposter" → "I'm learning something new"
   - Evidence: List 5 wins from the past year
   - Perspective: Would you judge someone else this harshly?
   - Action: Do it anyway (courage isn't absence of fear)

**When to use:**
- Career transitions & promotions
- Salary/promotion negotiations
- Imposter syndrome & self-doubt
- Building executive presence
- Navigating male-dominated environments

**Key phrases:**
- "What evidence do you have for that belief?"
- "If your best friend told you this, what would you say?"
- "What would you do if you weren't afraid?"
- "How are you claiming ownership of this situation?"

**Application in coaching:**
- Challenge limiting beliefs with evidence
- Build confidence through action (not just mindset)
- Create visibility & influence strategies
- Negotiate career moves strategically
""".strip()


# Brené Brown - Dare to Lead
DARE_TO_LEAD = """
**Dare to Lead (Brené Brown):**

Core focus: Vulnerability, courage, and authentic leadership

**Key Frameworks:**

1. **The Armor vs. Courage Mindset:**
   - **Armor (defensive)**: Perfectionism, numbing, controlling
   - **Courage (vulnerable)**: Showing up authentically, taking risks

2. **4 Courage-Building Skills:**
   - **Rumbling with Vulnerability**: Lean into discomfort
   - **Living into Our Values**: Clarity → action
   - **Braving Trust**: 7 trust behaviors (Boundaries, Reliability, Accountability, etc.)
   - **Learning to Rise**: Resilience after setbacks

3. **Clear is Kind Framework:**
   - Being vague to avoid discomfort is unkind
   - Direct, specific feedback is the most caring approach
   - Example: "I need to give you feedback on [specific issue]"

4. **The Story I'm Telling Myself:**
   - Separate facts from interpretation
   - Example: "The story I'm telling myself is that you don't value my work because..."
   - Opens space for clarification

**When to use:**
- Trust-building in teams
- Navigating difficult emotions
- Building psychological safety
- Leadership authenticity
- Recovering from failure

**Key questions:**
- "What story are you telling yourself about this?"
- "What would courage look like in this situation?"
- "What armor are you wearing to protect yourself?"
- "If you approached this with vulnerability, what would you say?"

**Application in coaching:**
- Identify defensive patterns
- Build trust through vulnerability
- Reframe failure as learning
- Practice authentic communication
""".strip()


# Marshall Goldsmith - What Got You Here Won't Get You There
WHAT_GOT_YOU_HERE = """
**What Got You Here Won't Get You There (Marshall Goldsmith):**

Core focus: Derailers that prevent senior leaders from advancing

**20 Habits That Hold You Back:**

Common executive derailers:
1. **Winning too much** - Need to win every argument
2. **Adding too much value** - Can't resist "improving" ideas
3. **Passing judgment** - Rating others constantly
4. **Making destructive comments** - Sarcasm, cutting remarks
5. **Starting with "No," "But," or "However"** - Negating others
6. **Telling the world how smart we are** - Showing off
7. **Speaking when angry** - Losing emotional control
8. **Withholding information** - Hoarding knowledge = power
9. **Failing to give recognition** - Not praising success
10. **Claiming credit we don't deserve** - Taking others' credit

**The FeedForward Process:**
1. Pick one behavior to improve
2. Ask people: "What suggestions do you have for the future?"
3. Listen, don't defend or explain
4. Thank them (that's it)
5. Repeat with 10-20 people

**Apology Framework:**
- "I'm sorry, I was wrong"
- Be specific about the behavior
- No "but" or justifications
- Ask what you can do differently

**When to use:**
- Senior executive coaching
- 360 feedback follow-up
- Reputation repair
- Leadership transition to C-suite
- Dealing with blindspots

**Key questions:**
- "What's one habit that's no longer serving you?"
- "What would people say you need to stop doing?"
- "How are you getting in your own way?"
- "What would change if you stopped [behavior]?"

**Application in coaching:**
- Identify success patterns that became derailers
- Systematic behavior change (not personality change)
- Stakeholder engagement for feedback
- Track progress with specific behaviors
""".strip()


# Framework selector helper
THOUGHT_LEADER_FRAMEWORKS = {
    "radical_candor": RADICAL_CANDOR,
    "making_of_a_manager": MAKING_OF_A_MANAGER,
    "take_back_your_power": TAKE_BACK_YOUR_POWER,
    "dare_to_lead": DARE_TO_LEAD,
    "what_got_you_here": WHAT_GOT_YOU_HERE,
}


def get_framework_for_context(user_message: str, emotion: str, goal_link: str) -> str:
    """
    Select most relevant thought leader framework based on context.
    
    Returns framework text to inject into system prompt.
    Priority order: most specific to most general.
    """
    msg_lower = user_message.lower()
    
    # Priority 1: Senior executive derailers → What Got You Here (most specific)
    if any(k in msg_lower for k in ["360 feedback", "360", "vp", "c-suite", "senior leader", "executive", "add too much value", "derailer", "blindspot", "reputation"]):
        return WHAT_GOT_YOU_HERE
    
    # Priority 2: New manager → Making of a Manager
    if any(k in msg_lower for k in ["new manager", "first time manager", "managing people", "delegation", "team lead"]):
        return MAKING_OF_A_MANAGER
    
    # Priority 3: Self-doubt, imposter syndrome, negotiation → Take Back Your Power
    if any(k in msg_lower for k in ["imposter", "not ready", "deserve", "doubt", "negotiat", "raise", "promotion"]):
        return TAKE_BACK_YOUR_POWER
    
    # Priority 4: Vulnerability, authenticity, trust → Dare to Lead
    if any(k in msg_lower for k in ["vulnerable", "authentic", "trust", "psychological safety", "courage"]):
        return DARE_TO_LEAD
    
    # Priority 5: Feedback & difficult conversations → Radical Candor (most general)
    if any(k in msg_lower for k in ["feedback", "difficult conversation", "confrontation", "honest", "direct"]):
        return RADICAL_CANDOR
    
    # Default: pick based on goal
    if goal_link == "leadership_effectiveness":
        return MAKING_OF_A_MANAGER
    elif "career_advancement" in goal_link:
        return TAKE_BACK_YOUR_POWER
    else:
        return RADICAL_CANDOR  # Most universally applicable
