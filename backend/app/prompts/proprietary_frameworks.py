"""
CoachingApp Proprietary Frameworks
Original frameworks developed for Career & Executive Coaching.

These frameworks synthesize proven coaching methodologies into practical,
actionable guidance. Inspired by decades of management research but
developed independently for this application.

LEGAL: These are original works created for CoachingApp. 
Not affiliated with or endorsed by any third-party authors.
"""

# Framework 1: Direct Care Feedback™
DIRECT_CARE_FEEDBACK = """
**Direct Care Feedback™ Framework**

Core principle: Balance empathy with clarity in feedback conversations.

**The Feedback Matrix:**
1. **Direct Care™** (high empathy + high clarity) ✅
   - Provide specific, actionable feedback
   - Show genuine investment in the person's growth
   - Example: "I observed [specific behavior]. Here's the impact and how to improve."

2. **Avoidance** (high empathy, low clarity) ❌
   - Being "nice" but not helpful
   - Withholding critical feedback to avoid discomfort

3. **Harshness** (low empathy, high clarity) ❌
   - Being brutally honest without consideration
   - Feedback feels like an attack, damages relationships

4. **Dishonesty** (low empathy, low clarity) ❌
   - Passive-aggressive or insincere feedback
   - Neither helpful nor genuine

**When to use:**
- Performance feedback conversations
- Addressing team dynamics
- Building trust through honest communication
- Navigating difficult conversations

**Key phrases:**
- "I'm sharing this because I care about your growth..."
- "Can I give you some direct feedback on [specific behavior]?"
- "What I observed was... and here's why it matters..."
- "Here's what I'd recommend you try..."

**Application in coaching:**
- Encourage leaders to practice direct, caring feedback
- Model it in coaching relationship (care + clarity)
- Help identify when they're avoiding tough conversations
- Practice specific feedback language
""".strip()


# Framework 2: Leadership Foundation™
LEADERSHIP_FOUNDATION = """
**Leadership Foundation™ Framework**

Core focus: Building strong leadership capabilities from the ground up.

**The Leadership Triangle:**

1. **Purpose** - Ensure team knows WHY their work matters
   - Connect daily work to strategic goals
   - Clarify impact on customers and stakeholders
   - Create meaning beyond tasks

2. **People** - Build a team that works well together
   - Hire for strengths and cultural fit
   - Develop individual capabilities
   - Foster psychological safety
   - Address conflicts early

3. **Process** - Create efficient ways of working
   - Establish clear workflows
   - Remove unnecessary friction
   - Enable autonomy with accountability
   - Measure what matters

**Effective Feedback Structure:**
- Set clear expectations upfront
- Share specific observations (not judgments)
- Clarify impact on goals/team
- Discuss next steps collaboratively
- Follow up on progress

**1-on-1 Meeting Framework:**
- What's top-of-mind for them? (not your agenda)
- What blockers can you help remove?
- Team dynamics and collaboration
- Career development & growth
- Feedback both ways

**Delegation Ladder:**
```
Level 1: "Tell me what to do" → Micromanaging (needs development)
Level 2: "Here are the options" → Teaching mode (building skills)
Level 3: "Here's my plan" → Delegating with oversight (growing trust)
Level 4: "Here's what I did" → Full autonomy (mature delegation)
```

**When to use:**
- New leader transitions
- Building high-performing teams
- Delegation challenges
- Setting up team processes
- Performance management

**Key questions:**
- "What would make this team 2x more effective?"
- "Are you clear on why this work matters?"
- "What's blocking you that I can help remove?"
- "What decision-making authority do you need?"
- "Where on the delegation ladder is each team member?"

**Application in coaching:**
- Guide leaders through transitions
- Diagnose delegation maturity levels
- Structure effective 1-on-1s
- Build team purpose and process clarity
""".strip()


# Framework 3: Power Ownership Model™
POWER_OWNERSHIP_MODEL = """
**Power Ownership Model™ Framework**

Core focus: Taking control of your career through ownership, influence, and evidence-based confidence.

**5 Career Limiting Beliefs (and how to overcome them):**

1. **"I'm not ready yet"** → Nobody is ever "fully ready"
   - Reality: Most people grow into roles, not before them
   - Action: List evidence of your preparation
   - Reframe: "I'm ready to learn and grow into this"

2. **"I don't deserve it"** → You've earned your seat
   - Reality: Others with similar or less experience have these roles
   - Action: Document your wins quarterly (brag file)
   - Reframe: "I've worked hard and delivered results"

3. **"It's never enough"** → Perfectionism is a trap
   - Reality: Progress > perfection, impact > hours
   - Action: Celebrate incremental progress
   - Reframe: "Good progress is good enough"

4. **"I can't have it all"** → Define YOUR "all"
   - Reality: You can have what you prioritize
   - Action: Clarify your top 3 priorities (others can wait)
   - Reframe: "I'm choosing what matters most to me"

5. **"It's too late"** → Career isn't linear
   - Reality: Many leaders pivot in their 40s, 50s, 60s
   - Action: Research late bloomers in your field
   - Reframe: "I'm bringing unique experience to this"

**Power = Ownership + Influence:**

**Own Your Narrative:**
- Control how you're perceived
- Document and share your wins
- Build your professional brand
- Speak at meetings and events

**Own Your Career:**
- Don't wait for permission
- Propose solutions, not just problems
- Seek stretch assignments
- Build strategic relationships

**Own Your Voice:**
- Speak up, even when uncomfortable
- Share ideas in high-stakes meetings
- Give direct feedback to peers and leaders
- Advocate for yourself and others

**Own Your Mistakes:**
- Failure is data, not identity
- Share lessons learned openly
- Take accountability quickly
- Move forward with new knowledge

**Visibility Strategy:**
1. Document your wins (keep a running list)
2. Share successes with stakeholders (don't assume they know)
3. Build strategic relationships (not just random networking)
4. Speak at meetings (even when nervous)
5. Volunteer for visible projects

**Negotiation Framework:**
- Know your market value (research > feelings)
- Ask for more than you think you deserve (room to negotiate)
- Negotiate beyond salary (equity, title, scope, flexibility)
- Practice saying "This is what I need" (confidence comes from preparation)
- Get it in writing

**When to use:**
- Career transitions & promotions
- Salary/promotion negotiations
- Overcoming self-doubt
- Building executive presence
- Navigating challenging environments

**Key questions:**
- "What evidence do you have for that belief?"
- "If your best friend told you this, what would you say?"
- "What would you do if you weren't afraid?"
- "How are you claiming ownership of this situation?"
- "What wins from the past year prove you're ready?"

**Application in coaching:**
- Challenge limiting beliefs with evidence
- Build confidence through action (not just mindset)
- Create visibility & influence strategies
- Negotiate career moves strategically
- Document and celebrate progress
""".strip()


# Framework 4: Courageous Leadership™
COURAGEOUS_LEADERSHIP = """
**Courageous Leadership™ Framework**

Core focus: Building trust and authenticity through vulnerability and clear communication.

**The Courage Mindset:**

**Defensive Mode (Armor):**
- Perfectionism (fear of mistakes)
- Numbing (avoiding difficult emotions)
- Controlling (fear of uncertainty)
- Pleasing everyone (fear of conflict)

**Courage Mode (Growth):**
- Showing up authentically (even when imperfect)
- Taking smart risks (vulnerability = strength)
- Embracing discomfort (growth happens here)
- Having hard conversations (directness = respect)

**4 Courage-Building Skills:**

1. **Embrace Discomfort**
   - Lean into challenging situations
   - Sit with uncertainty instead of rushing to certainty
   - Share struggles with trusted colleagues
   - Ask for help (strength, not weakness)

2. **Live Your Values**
   - Clarify your top 3 values
   - Align actions with values (walk the talk)
   - When values conflict, choose consciously
   - Model value-driven decision making

3. **Build Trust Systematically**
   - **B**oundaries: Respect yours and others'
   - **R**eliability: Do what you say you'll do
   - **A**ccountability: Own your mistakes
   - **V**ault: Keep confidences
   - **I**ntegrity: Choose courage over comfort
   - **N**on-judgment: Help without judging
   - **G**enerosity: Assume positive intent

4. **Bounce Back from Setbacks**
   - Acknowledge the disappointment
   - Extract the lesson
   - Share what you learned
   - Try again with new knowledge

**Clear Communication Principle:**
- Being vague to avoid discomfort is unkind
- Direct, specific communication is the most caring approach
- Example: "I need to give you feedback on [specific issue] because I care about your success"

**The Story I'm Telling Myself:**
- Separate facts from interpretation
- Example: "The story I'm telling myself is X because I observed Y..."
- Opens space for clarification and dialogue
- Prevents assumptions from becoming "truth"

**When to use:**
- Trust-building in teams
- Navigating difficult emotions
- Building psychological safety
- Authentic leadership development
- Recovering from failure
- Having tough conversations

**Key questions:**
- "What story are you telling yourself about this?"
- "What would courage look like in this situation?"
- "What armor are you wearing to protect yourself?"
- "If you approached this with vulnerability, what would you say?"
- "How can you be both kind and clear here?"
- "What would happen if you shared this struggle with your team?"

**Application in coaching:**
- Identify defensive patterns (armor vs courage)
- Build trust through vulnerability (model it)
- Reframe failure as learning (extract lessons)
- Practice authentic communication (clear is kind)
- Develop resilience (bounce back stronger)
""".strip()


# Framework 5: Executive Evolution™
EXECUTIVE_EVOLUTION = """
**Executive Evolution™ Framework**

Core focus: Identifying and changing behaviors that limit senior leaders' effectiveness.

**20 Executive Derailers to Avoid:**

**Communication Derailers:**
1. **Winning too much** - Need to win every argument, even trivial ones
2. **Adding too much value** - Can't resist "improving" every idea shared
3. **Passing judgment** - Rating others constantly, unsolicited opinions
4. **Making destructive comments** - Sarcasm, cutting remarks, "just kidding"
5. **Starting with "No," "But," or "However"** - Immediately negating others
6. **Telling the world how smart we are** - Showing off, name-dropping
7. **Speaking when angry** - Losing emotional control, damaging relationships

**Relationship Derailers:**
8. **Withholding information** - Hoarding knowledge as power
9. **Failing to give recognition** - Not praising success, taking credit
10. **Claiming credit we don't deserve** - Taking others' contributions
11. **Making excuses** - Blaming circumstances or others
12. **Clinging to the past** - "We've always done it this way"
13. **Playing favorites** - Inconsistent treatment of team members
14. **Refusing to express regret** - Never apologizing or admitting mistakes

**Execution Derailers:**
15. **Not listening** - Interrupting, planning response while others speak
16. **Failing to express gratitude** - Not saying "thank you" enough
17. **Punishing the messenger** - Shooting the bearer of bad news
18. **Passing the buck** - Blaming others for your decisions
19. **An excessive need to be "me"** - "That's just who I am" (refusing to adapt)
20. **Goal obsession** - So focused on outcomes that you damage relationships

**The FeedForward Process:**
1. Pick **one behavior** to improve (not personality, just behavior)
2. Ask people: "What suggestions do you have for me in the future?"
3. **Listen only** - Don't defend, explain, or argue
4. Say "Thank you" (that's it, no commentary)
5. Repeat with 10-20 people for diverse perspectives
6. Follow up quarterly to track progress

**Apology Framework:**
- "I'm sorry, I was wrong" (specific and direct)
- Be specific about the behavior (not general)
- No "but" or justifications (undermines apology)
- Ask what you can do differently (shows commitment)
- Change the behavior (actions > words)

**When to use:**
- Senior executive coaching
- 360 feedback follow-up
- Reputation repair
- Leadership transition to C-suite
- Dealing with blindspots
- Preparing for board presentations
- High-stakes stakeholder management

**Key questions:**
- "What's one habit that's no longer serving you at this level?"
- "What would people say you need to stop doing?"
- "How are you getting in your own way?"
- "What would change if you stopped [specific behavior]?"
- "If you asked your team for one behavior change, what would they say?"
- "What worked at your previous level but not anymore?"

**Application in coaching:**
- Identify success patterns that became derailers at new level
- Systematic behavior change (not personality change)
- Stakeholder engagement for feedback (FeedForward)
- Track progress with specific behaviors (measurable)
- Focus on one behavior at a time (don't overwhelm)
""".strip()


# Framework selector helper
PROPRIETARY_FRAMEWORKS = {
    "direct_care_feedback": DIRECT_CARE_FEEDBACK,
    "leadership_foundation": LEADERSHIP_FOUNDATION,
    "power_ownership_model": POWER_OWNERSHIP_MODEL,
    "courageous_leadership": COURAGEOUS_LEADERSHIP,
    "executive_evolution": EXECUTIVE_EVOLUTION,
}


def get_framework_for_context(user_message: str, emotion: str, goal_link: str) -> str:
    """
    Select most relevant proprietary framework based on context.
    
    Returns framework text to inject into system prompt.
    Priority order: most specific to most general.
    """
    msg_lower = user_message.lower()
    
    # Priority 1: Senior executive issues → Executive Evolution
    if any(k in msg_lower for k in ["360 feedback", "360", "vp", "c-suite", "senior leader", "executive", "derailer", "blindspot", "reputation", "board"]):
        return EXECUTIVE_EVOLUTION
    
    # Priority 2: New leader → Leadership Foundation
    if any(k in msg_lower for k in ["new manager", "first time manager", "managing people", "delegation", "team lead", "new leader"]):
        return LEADERSHIP_FOUNDATION
    
    # Priority 3: Self-doubt, career advancement → Power Ownership Model
    if any(k in msg_lower for k in ["imposter", "not ready", "deserve", "doubt", "negotiat", "raise", "promotion", "self doubt"]):
        return POWER_OWNERSHIP_MODEL
    
    # Priority 4: Vulnerability, authenticity, trust → Courageous Leadership
    if any(k in msg_lower for k in ["vulnerable", "authentic", "trust", "psychological safety", "courage", "safe"]):
        return COURAGEOUS_LEADERSHIP
    
    # Priority 5: Feedback & difficult conversations → Direct Care Feedback
    if any(k in msg_lower for k in ["feedback", "difficult conversation", "confrontation", "honest", "direct", "hard conversation"]):
        return DIRECT_CARE_FEEDBACK
    
    # Fallback: pick based on goal
    if goal_link == "leadership_effectiveness":
        return LEADERSHIP_FOUNDATION
    elif goal_link == "career_advancement":
        return POWER_OWNERSHIP_MODEL
    else:
        return DIRECT_CARE_FEEDBACK  # Most universally applicable
